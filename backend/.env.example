# =============================================================================
# RunningCoach Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Generate secrets: python -c "import secrets; print(secrets.token_hex(32))"

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_NAME=RunningCoach
APP_VERSION=0.1.0
DEBUG=true
API_PREFIX=/api/v1

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/runningcoach
DATABASE_ECHO=false

# -----------------------------------------------------------------------------
# Redis (Session storage)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Session Configuration
# -----------------------------------------------------------------------------
# Session secret key (generate: python -c "import secrets; print(secrets.token_hex(32))")
SESSION_SECRET=change-me-in-production-use-secrets-token-hex-32

# Session TTL in seconds (default: 7 days = 604800)
SESSION_TTL_SECONDS=604800

# Cookie security settings
COOKIE_SECURE=false
COOKIE_SAMESITE=lax

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
SECRET_KEY=change-me-in-production-use-secrets-token-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Encryption key for sensitive data
# Generate: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=

# -----------------------------------------------------------------------------
# Garmin Connect
# -----------------------------------------------------------------------------
# Note: Garmin credentials are stored encrypted per-user in the database
# These are for initial admin setup only

# Encryption key for Garmin credentials (same as ENCRYPTION_KEY or separate)
GARMIN_ENCRYPTION_KEY=

# Backfill settings
# 0 = full history, >0 = limit to N days
GARMIN_BACKFILL_DAYS=0

# Safety window for re-fetching recent data (overlapping sync)
GARMIN_SAFETY_WINDOW_DAYS=3

# FIT file storage path
FIT_STORAGE_PATH=./data/fit_files

# -----------------------------------------------------------------------------
# AI Configuration
# -----------------------------------------------------------------------------
# AI Provider: "google" (Gemini) or "openai" (GPT)
AI_PROVIDER=google

# Google AI (Gemini)
GOOGLE_AI_API_KEY=
GOOGLE_AI_MODEL=gemini-2.5-flash-lite

# OpenAI (legacy, fallback)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# AI Model Parameters
AI_MAX_TOKENS=2000
AI_TEMPERATURE_CHAT=0.7
AI_TEMPERATURE_PLAN=0.5

# AI Snapshot Configuration
AI_SNAPSHOT_WEEKS=6
AI_SNAPSHOT_RECOVERY_DAYS=7
AI_SNAPSHOT_ALL_TIME_START_YEAR=2006
AI_DEFAULT_INTERVAL_PACE=270
AI_DEFAULT_TEMPO_PACE=300
AI_SAMPLE_LIMIT=5000

# -----------------------------------------------------------------------------
# Strava (Optional - Activity Sync)
# -----------------------------------------------------------------------------
STRAVA_CLIENT_ID=
STRAVA_CLIENT_SECRET=
STRAVA_REDIRECT_URI=http://localhost:5173/strava/callback

# Encryption key for Strava tokens (generate: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
STRAVA_ENCRYPTION_KEY=

# Strava API base URLs (usually don't need to change)
STRAVA_OAUTH_BASE_URL=https://www.strava.com/oauth
STRAVA_API_BASE_URL=https://www.strava.com/api/v3

# Strava HTTP Timeouts
STRAVA_HTTP_TIMEOUT_SECONDS=60
STRAVA_HTTP_TIMEOUT_SHORT_SECONDS=30
STRAVA_TOKEN_REFRESH_BUFFER_SECONDS=300

# -----------------------------------------------------------------------------
# Sync Configuration
# -----------------------------------------------------------------------------
# Lock TTL for sync operations (default: 3 hours for large backfills)
SYNC_LOCK_TTL_SECONDS=10800

# Extend lock every N seconds during long syncs (default: 10 minutes)
SYNC_LOCK_EXTENSION_INTERVAL=600

# -----------------------------------------------------------------------------
# Admin User (Initial Seed)
# -----------------------------------------------------------------------------
# Used for initial user creation script
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change-this-password

# -----------------------------------------------------------------------------
# Gear Configuration
# -----------------------------------------------------------------------------
# Default max distance for shoes before retirement (in meters, default: 800km)
GEAR_DEFAULT_MAX_DISTANCE_METERS=800000
